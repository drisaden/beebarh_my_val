<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Will You Be My Valentine ğŸ’–</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
    }
    .hide-for-screenshot {
  visibility: hidden !important;
}
.card {
  position: absolute;
  inset: 0;
  border-radius: 1rem;
  overflow: hidden;
  background: white;
  box-shadow: 0 20px 40px rgba(0,0,0,0.25);
  cursor: grab;
  user-select: none;
  touch-action: none;
will-change: transform;
  transition:
    transform 0.4s cubic-bezier(.22,.61,.36,1),
    box-shadow 0.3s ease,
    opacity 0.3s ease;
}

.card:hover {
  box-shadow: 0 28px 60px rgba(0,0,0,0.35);
}


.card:active {
  cursor: grabbing;
}

.card img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.snowflake {
  position: absolute;
  top: -20px;
  opacity: 0;
  animation-name: fall, fadeIn;
  animation-timing-function: linear, ease;
  animation-fill-mode: forwards;
  pointer-events: none;
}

@keyframes fall {
  to {
    transform: translateY(110vh);
  }
}

@keyframes fadeIn {
  to {
    opacity: 0.9;
  }
}
#noBtn {
  position: absolute;
  left: 65%; /* or relative */
  transition: transform 0.15s ease;
}


</style>
</head>

<body class="bg-gradient-to-br from-pink-200 to-red-300 min-h-screen flex items-center justify-center overflow-hidden">
  
<audio id="loveSong" loop>
  <source src="/ed_sheeran_perfect.mp3" type="audio/mp3">
</audio>
  <!-- MAIN CONTENT -->
  <section id="main" class="text-center space-y-8">
  <h1 id="question"
  class="text-4xl md:text-5xl font-bold text-white drop-shadow transition-all duration-300">
  Habeebah, Will you be my Val? ğŸ’•
</h1>

    <div class="text-7xl animate-pulse">â¤ï¸</div>

    <!-- Buttons: normal on load -->
    <div id="buttonWrapper" class="flex justify-center gap-6 relative">
      <button id="yesBtn"
        class="px-8 py-4 bg-red-500 hover:bg-red-600 text-white text-xl rounded-full shadow-lg transition">
        Yes ğŸ’˜
      </button>

      <button id="noBtn"
        class="px-8 py-4 bg-gray-400 text-white text-xl rounded-full shadow-lg transition">
        No ğŸ™„
      </button>
    </div>
  </section>

  <!-- UNESCAPABLE MODAL -->
  <div id="modal"
    class="fixed inset-0 hidden z-50 bg-gradient-to-br from-pink-500 to-red-600 flex items-center justify-center">
    <!-- â„ï¸ Snow Layer (MODAL ONLY) -->
<div id="snowLayer" class="absolute inset-0 pointer-events-none overflow-hidden"></div>

    <div id="captureArea" class="relative text-center text-white space-y-6 px-6 z-10">
      <h2 class="text-5xl font-bold"> Yayy!!! She said YES ğŸ˜ğŸ’–</h2>
  <p class="text-xl max-w-md mx-auto">You just made me the happiest person alive. ğŸ†ğŸ’ğŸ¥°ğŸ‰</p>

  <!-- CARD STACK -->
<div id="cardStack"
  class="relative w-72 h-96 mx-auto mt-4">

  <div class="card">
    <img src="photo1.jpg" crossorigin="anonymous" />
  </div>

  <div class="card">
    <img src="photo2.jpg" crossorigin="anonymous"/>
  </div>

  <div class="card">
    <img src="photo3.jpg" crossorigin="anonymous"/>
  </div>

  <div class="card">
    <img src="photo4.jpg" crossorigin="anonymous"/>
  </div>
  <div class="card">
    <img src="photo5.jpg" crossorigin="anonymous"/>
  </div>
</div>

  <p class="text-lg">Forever starts now â¤ï¸ğŸŒ¹</p>

  <!-- Share Button -->
<!--  <button id="shareBtn"
    class="px-6 py-3 bg-green-500 hover:bg-green-600 text-white rounded-full">
    Tap here to screenshot this page and send it to me on WhatsApp
  </button>-->
</div>
</div>

<div id="hearts"></div>

<style>
  .heart {
    position: fixed;
    bottom: -20px;
    font-size: 24px;
    animation: floatUp 6s linear infinite;
    opacity: 0.8;
  }

  @keyframes floatUp {
    from {
      transform: translateY(0) scale(1);
      opacity: 1;
    }
    to {
      transform: translateY(-110vh) scale(1.5);
      opacity: 0;
    }
  }
</style>
<script>
  /* ===========================
     UTILITIES
  =========================== */
  const $ = id => document.getElementById(id);
  
  /* ===========================
     ELEMENTS
  =========================== */
  const noBtn = $("noBtn");
  const yesBtn = $("yesBtn");
  const question = $("question");
  const modal = $("modal");
  const song = $("loveSong");
  const heartsContainer = $("hearts");
  const stack = $("cardStack");
  
  /* ===========================
     STATE
  =========================== */
  let noHasMoved = false;
  let noClickCount = 0;
  let yesScale = 1;
  let snowInterval = null;
  let heartsInterval = null;
  
  /* ===========================
     CONFIG
  =========================== */
  const MAX_NO_CLICKS = 9;
  
  const persuasionTexts = [
    "Will you be my Valentine? ğŸ’•",
    "Are you sure? ğŸ¥º",
    "Come onâ€¦ itâ€™ll be cute ğŸ˜Œ",
    "I promise Iâ€™ll treat you right ğŸ’–",
    "Why are you running ğŸ˜­",
    "This YES button is looking nice though ğŸ‘€",
    "Just imagine saying yes ğŸ˜",
    "Okay now youâ€™re playing hard to get ğŸ˜",
    "Last chanceâ€¦ my heart canâ€™t take this ğŸ’”",
    "Alright. Destiny has spoken ğŸŒ¹"
  ];
  
  /* ===========================
     NO BUTTON LOGIC
  =========================== */
  const handleNoInteraction = () => {
    noClickCount++;
  
    if (!noHasMoved) {
      noHasMoved = true;
      noBtn.style.position = "fixed";
    }
  
    if (noClickCount >= MAX_NO_CLICKS) {
      finalNoState();
      return;
    }
  
    moveNoButton();
    updateText();
    growYesButton();
  };
  document.addEventListener("mousemove", e => {
  console.log("mouse moving");
});
  // Desktop â†’ hover
  // Desktop: dodge on mouse proximity
document.addEventListener("mousemove", e => {
  if (window.innerWidth > 768) return; // desktop only
  if (noBtn.disabled) return;

  const rect = noBtn.getBoundingClientRect();
  const buffer = 80; // distance to trigger dodge

  const mouseNear =
    e.clientX > rect.left - buffer &&
    e.clientX < rect.right + buffer &&
    e.clientY > rect.top - buffer &&
    e.clientY < rect.bottom + buffer;

  if (mouseNear) {
    const x = Math.random() * 240 - 120;
    const y = Math.random() * 240 - 120;
    noBtn.style.transform = `translate(${x}px, ${y}px)`;
  }
});
  
  // Mobile â†’ click
  noBtn.addEventListener("click", () => {
    if (window.innerWidth < 768) {
      handleNoInteraction();
    }
  });
  
  const moveNoButton = () => {
    const padding = 20;
    const maxX = window.innerWidth - noBtn.offsetWidth - padding;
    const maxY = window.innerHeight - noBtn.offsetHeight - padding;
  
    noBtn.style.left = Math.random() * maxX + "px";
    noBtn.style.top = Math.random() * maxY + "px";
  };
  
  const updateText = () => {
    question.textContent =
      persuasionTexts[Math.min(noClickCount, persuasionTexts.length - 1)];
  };
  
  const growYesButton = () => {
    yesScale += 0.08;
    yesBtn.style.transform = `scale(${yesScale})`;
  };
  
  const finalNoState = () => {
    question.textContent = "OKâ€¦ I give up ğŸ’˜";
    noBtn.disabled = true;
    noBtn.style.opacity = "0.4";
    noBtn.style.cursor = "not-allowed";
  
    yesScale += 0.15;
    yesBtn.style.transform = `scale(${yesScale})`;
    yesBtn.classList.add("animate-pulse");
  };
  
  /* ===========================
     YES BUTTON
  =========================== */
  yesBtn.addEventListener("click", () => {
    flowerSplash();
    modal.classList.remove("hidden");
    modal.classList.add("flex");
    document.body.style.overflow = "hidden";
  
    song.play();
    startHearts();
    startModalSnow();
  });
  
  /* ===========================
     HEARTS
  =========================== */
  const startHearts = () => {
    if (heartsInterval) return;
  
    heartsInterval = setInterval(() => {
      const heart = document.createElement("div");
      heart.className = "heart";
      heart.textContent = "ğŸ’–";
      heart.style.left = Math.random() * 100 + "vw";
      heart.style.animationDuration = 4 + Math.random() * 3 + "s";
      heartsContainer.appendChild(heart);
      setTimeout(() => heart.remove(), 7000);
    }, 300);
  };
  
  /* ===========================
     MODAL SNOW (ONLY MODAL)
  =========================== */
  const startModalSnow = () => {
    if (snowInterval) return;
  
    const snowLayer = document.createElement("div");
    snowLayer.id = "snowLayer";
    snowLayer.style.position = "absolute";
    snowLayer.style.inset = 0;
    snowLayer.style.pointerEvents = "none";
    snowLayer.style.zIndex = 0;
    modal.appendChild(snowLayer);
  
    const particles = ["â„ï¸", "ğŸ’•", "ğŸŒ¸"];
  
    snowInterval = setInterval(() => {
      const flake = document.createElement("div");
      flake.textContent =
        particles[Math.floor(Math.random() * particles.length)];
  
      const depth = Math.random();
      const size = 12 + depth * 18;
      const duration = 6 - depth * 3;
  
      flake.style.position = "absolute";
      flake.style.left = Math.random() * 100 + "%";
      flake.style.top = "-30px";
      flake.style.fontSize = size + "px";
      flake.style.opacity = 0.4 + depth * 0.6;
  
      snowLayer.appendChild(flake);
  
      flake.animate(
        [{ transform: "translateY(0)" }, { transform: "translateY(110vh)" }],
        { duration: duration * 1000, easing: "linear" }
      );
  
      setTimeout(() => flake.remove(), duration * 1000 + 500);
    }, 180);
  };
  
  /* ===========================
     CARD STACK (SMOOTHER DESKTOP DRAG)
  =========================== */
  let cards = [...stack.children];
  const SWIPE_DISTANCE = 90;
  const FLICK_VELOCITY = 0.25;
  
  let startX = 0;
  let lastX = 0;
  let lastTime = 0;
  let velocity = 0;
  let dragging = false;
  
  const layoutCards = () => {
    cards.forEach((card, i) => {
      card.style.zIndex = cards.length - i;
      card.style.transform = `
        translate(${i * 6}px, ${i * 10}px)
        scale(${1 - i * 0.045})
        rotate(${i * -1.5}deg)
      `;
      card.style.opacity = i > 4 ? 0 : 1;
    });
  };
  
  layoutCards();
  
  const attachSwipe = card => {
    card.addEventListener("pointerdown", e => {
      dragging = true;
      startX = lastX = e.clientX;
      lastTime = Date.now();
      velocity = 0;
      card.setPointerCapture(e.pointerId);
      card.style.transition = "none";
    });
  
    card.addEventListener("pointermove", e => {
      if (!dragging) return;
      const now = Date.now();
      velocity = (e.clientX - lastX) / (now - lastTime || 1);
      lastX = e.clientX;
      lastTime = now;
  
      const dx = (e.clientX - startX) * 1.3;
      card.style.transform = `translateX(${dx}px) rotate(${dx * 0.08}deg)`;
    });
  
    card.addEventListener("pointerup", () => endSwipe(card));
    card.addEventListener("pointercancel", () => endSwipe(card));
  };
  
  const endSwipe = card => {
    dragging = false;
    const move = lastX - startX;
    const flick =
      Math.abs(move) > SWIPE_DISTANCE || Math.abs(velocity) > FLICK_VELOCITY;
  
    card.style.transition = "transform .45s cubic-bezier(.22,.61,.36,1)";
  
    if (flick) {
      const dir = move > 0 ? 1 : -1;
      card.style.transform = `translateX(${dir * (innerWidth + 200)}px) rotate(${dir * 30}deg)`;
  
      setTimeout(() => {
        stack.appendChild(card);
        cards = [...stack.children];
        card.style.transition = "none";
        layoutCards();
        attachSwipe(cards[0]);
      }, 450);
    } else {
      layoutCards();
    }
  };
  
  attachSwipe(cards[0]);
  
  /* ===========================
     FLOWER SPLASH (LONGER)
  =========================== */
  const flowerSplash = () => {
    const end = Date.now() + 2800;
  
    (function frame() {
      confetti({
        particleCount: 10,
        spread: 100,
        origin: { x: Math.random() },
        colors: ["#ff69b4", "#ff1493", "#ffd1dc", "#fff"]
      });
      if (Date.now() < end) requestAnimationFrame(frame);
    })();
  };
   

</script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</body>
</html>
</script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</body>
</html>
